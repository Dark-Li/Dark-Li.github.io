{"title":"ESP8266天气时钟","uid":"00f2f4843cd4ac47c5806e7b7967e393","slug":"ESP8266天气时钟","date":"2023-10-12T13:25:15.000Z","updated":"2023-10-15T08:45:52.093Z","comments":true,"path":"api/articles/ESP8266天气时钟.json","keywords":null,"cover":[],"content":"<p>起源于在逛淘宝的时候看到的一个天气时钟，后来在B站搜索了相关内容，发现是个开源项目于是便决定复刻。</p>\n<h1 id=\"第一阶段-复刻\"><a href=\"#第一阶段-复刻\" class=\"headerlink\" title=\"第一阶段-复刻\"></a>第一阶段-复刻</h1><h2 id=\"材料准备\"><a href=\"#材料准备\" class=\"headerlink\" title=\"材料准备\"></a>材料准备</h2><p>1.ESP8266+ST7789<br>2.USB转串口驱动程序 CH340G、flash_download_tools_v3.6.5<br>3.SD<sup>2</sup> 开源固件</p>\n<h2 id=\"针脚接线\"><a href=\"#针脚接线\" class=\"headerlink\" title=\"针脚接线\"></a>针脚接线</h2><p>按照如图将屏幕与ESP8266上的针脚用杜邦线接在一起<br><img src=\"https://s2.loli.net/2023/10/15/F6VltWLgdvHuIMa.png\" alt=\"image.png\"></p>\n<h2 id=\"固件写入\"><a href=\"#固件写入\" class=\"headerlink\" title=\"固件写入\"></a>固件写入</h2><p>1.安装USB转串口驱动程序 CH340G模块驱动<br>2.打开flash_download_tools_v3.6.5并选择ESP8266并按照如图设置<br><img src=\"https://s2.loli.net/2023/10/15/qzk1wv8sMtlTiay.png\" alt=\"image.png\"><br>若不知道端口，右键此电脑-管理-设备管理器-端口，找到CH340括号后面的COMX，然后在flash_download_tools_v3.6.5里选择对应的端口</p>\n<h2 id=\"配网\"><a href=\"#配网\" class=\"headerlink\" title=\"配网\"></a>配网</h2><p>拔掉电源线重新插入即可开机，配网只需扫描二维码即可使用<br><img src=\"https://s2.loli.net/2023/10/15/8RiJZ9bWqTrtBla.jpg\" alt=\"c036b7b266492c90d4378d26935e56f.jpg\"></p>\n<h1 id=\"第二阶段-折腾固件\"><a href=\"#第二阶段-折腾固件\" class=\"headerlink\" title=\"第二阶段-折腾固件\"></a>第二阶段-折腾固件</h1><p>这样直接刷入别人做好的固件几乎是什么也改不了，想更多的进行一些修改自定义于是便需要源码。在网上所能找到的几乎都是现成的固件，偶然间在B站看到了有人分享源码，于是加入了QQ群拿到了SD<sup>2<sup>的源码。</p>\n<h2 id=\"看懂源码\"><a href=\"#看懂源码\" class=\"headerlink\" title=\"看懂源码\"></a>看懂源码</h2><p>源码是使用C++编写并使用Arduino进行编写，对于我而言看着真的头大，但好在作者的代码整洁清晰且都有注释，让我稍稍好一点。</p>\n<h2 id=\"Arduino-ESP8266库安装\"><a href=\"#Arduino-ESP8266库安装\" class=\"headerlink\" title=\"Arduino ESP8266库安装\"></a>Arduino ESP8266库安装</h2><p>这一步差点就给我折腾退了，先是使用官网最新的版本，按照<a href=\"https://blog.csdn.net/dwh1314/article/details/105111597\">CSDN</a>教程进行安装ESP8266库，结果硬生生安装不上。最后下载了1.8.19版本用同样的方式还是无法安装。在这里我就已经要放弃了，但是我不服啊，这铁定还要其他办法，果然最后又在<a href=\"https://blog.csdn.net/weixin_42880082/article/details/119481511\">CSDN</a>上看到了离线安装包，下载安装后果不其然可以选择ESP8266了。<br><img src=\"https://s2.loli.net/2023/10/15/EcgvrJXfjoB5d4t.png\" alt=\"image.png\"><br>按照如图所示设置（端口需自行选择）先刷一遍源码一切正常</p>\n<h2 id=\"太空人GIF修改\"><a href=\"#太空人GIF修改\" class=\"headerlink\" title=\"太空人GIF修改\"></a>太空人GIF修改</h2><p>最初以为就只用在项目中找到GIF位置并替换即可，翻遍了园项目也没有找到一张图片。我顿时就纳闷了，紧接着去找源代码发现了如下一段<br><img src=\"https://s2.loli.net/2023/10/15/dIfhncAlMxG8vWQ.png\" alt=\"image.png\"><br>这不就是我找的图片吗，问题又来了这拓展名是.h，这又给我干蒙圈了啊。于是我按照路径找到了这些文件，用Notepad++打开一看<br><img src=\"https://s2.loli.net/2023/10/15/yDzVjvmwRg6BP87.png\" alt=\"image.png\"><br>啊？这什么玩意儿啊？随后在网上搜索了pgmspace.h才知道原来这是将图片用uint8来储存以节省空间，那这就好说了啊，我只需要将我需要替换的GIF先逐帧输出然后再转换为8进制替换原文件中的八进制字符就好了。说干就干！首先将GIF逐帧输入，随后寻找图片输出16进制的软件，结果没找到……找到一个MATLAB的解决方案，但MATLAB我用不到啊……<br>最后经过各种搜寻最后又是在<a href=\"https://blog.csdn.net/tanmx219/article/details/113174812\">CSDN</a>上找到了一篇关于如何把图片文件如JPEG按16进制字节转变成C源码，看到这个直接开干，经过九牛二虎之力将所有.h文件中的16进制数组替换后重新刷入结果却是……<br><img src=\"https://s2.loli.net/2023/10/15/bERQzpqxD2St3lh.jpg\" alt=\"09de13d84529318679b676215a89d75.jpg\"><br>    太空人不见了，替换的GIF也没有出现……<br>    麻了属实是麻了……</p>\n<h2 id=\"小程序固件使用\"><a href=\"#小程序固件使用\" class=\"headerlink\" title=\"小程序固件使用\"></a>小程序固件使用</h2><p>在加的QQ群里还有一个支持小程序的固件，目前来说这个固件应该是最好用的固件，可以修改一些东西。于是养老了不折腾了。<br><img src=\"https://s2.loli.net/2023/10/15/4MHiu51zjQyNEg6.jpg\" alt=\"1395d5c6210bfbf7d8a51d7ea253d4e.jpg\"><br><img src=\"https://s2.loli.net/2023/10/15/5feNDKApR9bojLc.jpg\" alt=\"1a2a326c966c76e0b6457ede48d5c9d.jpg\"></p>\n","feature":true,"text":"起源于在逛淘宝的时候看到的一个天气时钟，后来在B站搜索了相关内容，发现是个开源项目于是便决定复刻。 第一阶段-复刻材料准备1.ESP8266+ST77892.U...","permalink":"/post/ESP8266天气时钟","photos":[],"count_time":{"symbolsCount":"1.2k","symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"ESP8266","slug":"ESP8266","count":1,"path":"api/tags/ESP8266.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5-%E5%A4%8D%E5%88%BB\"><span class=\"toc-text\">第一阶段-复刻</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%9D%90%E6%96%99%E5%87%86%E5%A4%87\"><span class=\"toc-text\">材料准备</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%92%88%E8%84%9A%E6%8E%A5%E7%BA%BF\"><span class=\"toc-text\">针脚接线</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%9B%BA%E4%BB%B6%E5%86%99%E5%85%A5\"><span class=\"toc-text\">固件写入</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%91\"><span class=\"toc-text\">配网</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5-%E6%8A%98%E8%85%BE%E5%9B%BA%E4%BB%B6\"><span class=\"toc-text\">第二阶段-折腾固件</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%9C%8B%E6%87%82%E6%BA%90%E7%A0%81\"><span class=\"toc-text\">看懂源码</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Arduino-ESP8266%E5%BA%93%E5%AE%89%E8%A3%85\"><span class=\"toc-text\">Arduino ESP8266库安装</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%A4%AA%E7%A9%BA%E4%BA%BAGIF%E4%BF%AE%E6%94%B9\"><span class=\"toc-text\">太空人GIF修改</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%9B%BA%E4%BB%B6%E4%BD%BF%E7%94%A8\"><span class=\"toc-text\">小程序固件使用</span></a></li></ol></li></ol>","author":{"name":"Ender_Li","slug":"blog-author","avatar":"https://s2.loli.net/2023/10/08/4ia5pzTr9N2GJBZ.png","link":"/","description":"普普通通的大学生，记录一下自己的学习和经验。","socials":{"github":"https://github.com/Dark-Li","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"https://site-assets.fontawesome.com/releases/v6.4.2/svgs/brands/bilibili.svg","link":"https://space.bilibili.com/109396798"}}}},"mapped":true,"hidden":false,"prev_post":{},"next_post":{"title":"博客重制版","uid":"8064d033add1c34253139a96c183e0a4","slug":"博客重制版","date":"2023-10-08T12:11:15.000Z","updated":"2023-10-09T13:46:12.744Z","comments":true,"path":"api/articles/博客重制版.json","keywords":null,"cover":null,"text":"Hello World！本次重制版博客采用Hexo+Github Pages静态网页部署，省去了购买服务器的成本。之前一直使用的是雨云虚拟服务器+Wordpre...","permalink":"/post/博客重制版","photos":[],"count_time":{"symbolsCount":191,"symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"闲笔","slug":"闲笔","count":1,"path":"api/tags/闲笔.json"}],"author":{"name":"Ender_Li","slug":"blog-author","avatar":"https://s2.loli.net/2023/10/08/4ia5pzTr9N2GJBZ.png","link":"/","description":"普普通通的大学生，记录一下自己的学习和经验。","socials":{"github":"https://github.com/Dark-Li","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"https://site-assets.fontawesome.com/releases/v6.4.2/svgs/brands/bilibili.svg","link":"https://space.bilibili.com/109396798"}}}},"feature":true}}